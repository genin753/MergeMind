<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merge Mind</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0e5ec; /* ネオモーフィズムの背景色 */
            color: #333;
        }

        .neomorphism {
            background: #e0e5ec;
            box-shadow: 8px 8px 16px #cdd3d9, -8px -8px 16px #f3f7ff;
            border-radius: 2rem;
            transition: all 0.3s ease;
        }

        .neomorphism-inset {
            background: #e0e5ec;
            box-shadow: inset 8px 8px 16px #cdd3d9, inset -8px -8px 16px #f3f7ff;
            border-radius: 1.5rem;
            transition: all 0.3s ease;
        }

        .neomorphism:hover {
            box-shadow: 4px 4px 8px #cdd3d9, -4px -4px 8px #f3f7ff;
        }
        
        .neomorphism-btn {
            background: #e0e5ec;
            box-shadow: 4px 4px 8px #cdd3d9, -4px -4px 8px #f3f7ff;
            transition: all 0.2s ease;
        }

        .neomorphism-btn:active {
            box-shadow: inset 4px 4px 8px #cdd3d9, inset -4px -4px 8px #f3f7ff;
        }

        .bg-gradient-blue {
            background-image: linear-gradient(145deg, #4c96e3, #66c0e8);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-e0e5ec shadow-sm p-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
                <h1 class="text-2xl font-bold text-gray-800">Merge Mind</h1>
            </div>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="#demo" class="text-gray-600 hover:text-blue-600 font-medium">Try</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Section -->
    <main class="container mx-auto px-4 py-12">
        <!-- Hero Section -->
        <section class="neomorphism p-10 mb-12 text-center">
            <h2 class="text-4xl md:text-5xl font-extrabold text-blue-800 mb-4">オーダーメイドの<br class="md:hidden">最適案を提供</h2>
            <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                Merge Mindは、チーム内の多様な意見をAIがまとめ、議論の質を高め、スムーズな合意形成を支援する次世代のコラボレーションツールです。
            </p>
            <a href="#demo" class="neomorphism-btn inline-block py-3 px-8 rounded-full shadow-lg text-gray-700 font-bold hover:bg-white transition-colors duration-300">
                今すぐ試す
            </a>
        </section>

        <!-- Demo Section (Interactive element) -->
        <section id="demo" class="neomorphism p-8 mb-12">
            <h3 class="text-3xl font-bold text-gray-800 text-center mb-8">複数の意見を統合して最適な答えを導き出す</h3>
            <div class="max-w-4xl mx-auto">
                <div id="input-container" class="flex flex-col space-y-4 mb-4">
                    <!-- Default input fields -->
                    <div class="flex items-center space-x-2 input-group">
                        <textarea class="flex-1 p-4 neomorphism-inset focus:outline-none" placeholder="意見を入力してください"></textarea>
                        <button class="remove-btn neomorphism-btn text-gray-400 hover:text-red-500 text-3xl font-bold w-10 h-10 rounded-full hidden">&times;</button>
                    </div>
                    <div class="flex items-center space-x-2 input-group">
                        <textarea class="flex-1 p-4 neomorphism-inset focus:outline-none" placeholder="意見を入力してください"></textarea>
                        <button class="remove-btn neomorphism-btn text-gray-400 hover:text-red-500 text-3xl font-bold w-10 h-10 rounded-full hidden">&times;</button>
                    </div>
                </div>

                <div class="flex justify-center mt-6 mb-8">
                    <button id="add-input-btn" class="neomorphism-btn text-gray-700 w-10 h-10 rounded-full text-2xl font-bold shadow-lg hover:bg-white transition-colors duration-300">+</button>
                </div>
                
                <div class="flex justify-center mb-8">
                    <button id="process-button" class="neomorphism-btn bg-gradient-blue text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition-all duration-300">
                        Merge!
                    </button>
                </div>

                <div id="output-section">
                    <h4 class="text-2xl font-bold text-gray-800 mb-4 text-center">AIによる分析結果</h4>

                    <!-- Steady Output -->
                    <div class="neomorphism-inset p-6 mb-6">
                        <h5 class="text-xl font-bold text-gray-700 mb-2 flex items-center">
                            <span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-2"></span>Steady (堅実な答え)
                        </h5>
                        <div id="steady-output" class="text-gray-700 leading-relaxed">
                            <p class="text-gray-500">Mergeボタンを押すとここに結果が表示されます。</p>
                        </div>
                    </div>

                    <!-- Risk-taking Output -->
                    <div class="neomorphism-inset p-6 mb-6">
                        <h5 class="text-xl font-bold text-gray-700 mb-2 flex items-center">
                            <span class="inline-block w-3 h-3 bg-red-500 rounded-full mr-2"></span>Risk-taking (攻めの答え)
                        </h5>
                        <div id="risk-taking-output" class="text-gray-700 leading-relaxed">
                            <p class="text-gray-500">Mergeボタンを押すとここに結果が表示されます。</p>
                        </div>
                    </div>

                    <!-- Creative Output -->
                    <div class="neomorphism-inset p-6 mb-6">
                        <h5 class="text-xl font-bold text-gray-700 mb-2 flex items-center">
                            <span class="inline-block w-3 h-3 bg-purple-500 rounded-full mr-2"></span>Creative (創造的な答え)
                        </h5>
                        <div id="creative-output" class="text-gray-700 leading-relaxed">
                            <p class="text-gray-500">Mergeボタンを押すとここに結果が表示されます。</p>
                        </div>
                    </div>

                    <!-- Analytical Output -->
                    <div class="neomorphism-inset p-6 mb-6">
                        <h5 class="text-xl font-bold text-gray-700 mb-2 flex items-center">
                            <span class="inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"></span>Analytical (分析的な答え)
                        </h5>
                        <div id="analytical-output" class="text-gray-700 leading-relaxed">
                            <p class="text-gray-500">Mergeボタンを押すとここに結果が表示されます。</p>
                        </div>
                    </div>

                    <!-- User-Centric Output -->
                    <div class="neomorphism-inset p-6">
                        <h5 class="text-xl font-bold text-gray-700 mb-2 flex items-center">
                            <span class="inline-block w-3 h-3 bg-yellow-500 rounded-full mr-2"></span>User-Centric (ユーザー中心の答え)
                        </h5>
                        <div id="user-centric-output" class="text-gray-700 leading-relaxed">
                            <p class="text-gray-500">Mergeボタンを押すとここに結果が表示されます。</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white p-6 text-center">
        <p>&copy; 2025 Merge Mind. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const addInputBtn = document.getElementById('add-input-btn');
            const processButton = document.getElementById('process-button');
            const inputContainer = document.getElementById('input-container');
            const steadyOutput = document.getElementById('steady-output');
            const riskTakingOutput = document.getElementById('risk-taking-output');
            const creativeOutput = document.getElementById('creative-output');
            const analyticalOutput = document.getElementById('analytical-output');
            const userCentricOutput = document.getElementById('user-centric-output');

            // Function to add a new input field
            const addInputField = () => {
                const inputGroup = document.createElement('div');
                inputGroup.className = 'flex items-center space-x-2 input-group';
                inputGroup.innerHTML = `
                    <textarea class="flex-1 p-4 neomorphism-inset focus:outline-none" placeholder="意見を入力してください"></textarea>
                    <button class="remove-btn neomorphism-btn text-gray-400 hover:text-red-500 text-3xl font-bold w-10 h-10 rounded-full">&times;</button>
                `;
                inputContainer.appendChild(inputGroup);
                updateRemoveButtons();
            };

            // Function to remove an input field
            const removeInputField = (button) => {
                button.closest('.input-group').remove();
                updateRemoveButtons();
            };

            // Function to update the visibility of remove buttons
            const updateRemoveButtons = () => {
                const inputGroups = document.querySelectorAll('.input-group');
                if (inputGroups.length > 2) {
                    inputGroups.forEach(group => group.querySelector('.remove-btn').classList.remove('hidden'));
                } else {
                    inputGroups.forEach(group => group.querySelector('.remove-btn').classList.add('hidden'));
                }
            };

            // Initial setup
            updateRemoveButtons();

            // Event listener for adding input fields
            addInputBtn.addEventListener('click', addInputField);
            
            // Event listener for removing input fields
            inputContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('remove-btn')) {
                    removeInputField(e.target);
                }
            });

            // Event listener for processing button
            processButton.addEventListener('click', () => {
                const textareas = document.querySelectorAll('#input-container textarea');
                const inputs = Array.from(textareas).map(textarea => textarea.value.trim()).filter(text => text !== '');

                if (inputs.length === 0) {
                    showCustomMessage("何か意見を入力してください。", 'error');
                    return;
                }

                steadyOutput.innerHTML = '<p class="text-gray-500">AIが分析中...</p>';
                riskTakingOutput.innerHTML = '<p class="text-gray-500">AIが分析中...</p>';
                creativeOutput.innerHTML = '<p class="text-gray-500">AIが分析中...</p>';
                analyticalOutput.innerHTML = '<p class="text-gray-500">AIが分析中...</p>';
                userCentricOutput.innerHTML = '<p class="text-gray-500">AIが分析中...</p>';
                processButton.disabled = true;

                // Call the LLM to generate the five summaries
                const generateSummaries = async () => {
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                    const systemPrompt = "あなたは複数の意見を統合し、様々な視点から最適な答えを導き出すAIです。与えられた意見を読み、以下の5つの異なる視点から回答を生成してください。\n1. Steady (堅実な答え): 安定性と実現可能性を重視した、リスクの少ない解決策を提示する。\n2. Risk-taking (攻めの答え): 多少のリスクを伴っても、大きなリターンやイノベーションを狙う大胆な解決策を提示する。\n3. Creative (創造的な答え): 既存の枠組みにとらわれない、ユニークで斬新なアイデアを提示する。\n4. Analytical (分析的な答え): 意見の背景にあるデータや論理的な根拠を重視し、客観的な事実に基づいた答えを提示する。\n5. User-Centric (ユーザー中心の答え): 最終的なユーザーのニーズや体験に焦点を当て、プロダクトを使う人が何を求めているかを掘り下げた答えを提示する。";
                    const userQuery = `複数の意見：\n${inputs.map((input, index) => `${index + 1}. ${input}`).join('\n')}\n\n上記の意見を統合し、以下の5つの視点から回答を生成してください。`;

                    try {
                        const payload = {
                            contents: [{ parts: [{ text: userQuery }] }],
                            systemInstruction: {
                                parts: [{ text: systemPrompt }]
                            },
                        };

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        const result = await response.json();
                        const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || "要約を生成できませんでした。";
                        
                        // Parse the output to separate the sections
                        const sections = {
                            steady: "要約を生成できませんでした。",
                            risk: "要約を生成できませんでした。",
                            creative: "要約を生成できませんでした。",
                            analytical: "要約を生成できませんでした。",
                            userCentric: "要約を生成できませんでした."
                        };

                        const lines = text.split('\n').map(line => line.trim()).filter(line => line.length > 0);
                        let currentSection = null;

                        lines.forEach(line => {
                            if (line.includes("Steady")) {
                                currentSection = 'steady';
                            } else if (line.includes("Risk-taking")) {
                                currentSection = 'risk';
                            } else if (line.includes("Creative")) {
                                currentSection = 'creative';
                            } else if (line.includes("Analytical")) {
                                currentSection = 'analytical';
                            } else if (line.includes("User-Centric")) {
                                currentSection = 'userCentric';
                            } else if (currentSection) {
                                sections[currentSection] = line.replace(/^- /, '');
                                currentSection = null;
                            }
                        });

                        steadyOutput.innerHTML = `<p>${sections.steady.replace(/\n/g, '<br>')}</p>`;
                        riskTakingOutput.innerHTML = `<p>${sections.risk.replace(/\n/g, '<br>')}</p>`;
                        creativeOutput.innerHTML = `<p>${sections.creative.replace(/\n/g, '<br>')}</p>`;
                        analyticalOutput.innerHTML = `<p>${sections.analytical.replace(/\n/g, '<br>')}</p>`;
                        userCentricOutput.innerHTML = `<p>${sections.userCentric.replace(/\n/g, '<br>')}</p>`;

                    } catch (error) {
                        console.error('API呼び出しエラー:', error);
                        steadyOutput.innerHTML = '<p class="text-red-500">エラーが発生しました。もう一度お試しください。</p>';
                        riskTakingOutput.innerHTML = '<p class="text-red-500">エラーが発生しました。もう一度お試しください。</p>';
                        creativeOutput.innerHTML = '<p class="text-red-500">エラーが発生しました。もう一度お試しください。</p>';
                        analyticalOutput.innerHTML = '<p class="text-red-500">エラーが発生しました。もう一度お試しください。</p>';
                        userCentricOutput.innerHTML = '<p class="text-red-500">エラーが発生しました。もう一度お試しください。</p>';
                    } finally {
                        processButton.disabled = false;
                    }
                };

                generateSummaries();
            });

            // Function to show a custom message box
            function showCustomMessage(message, type) {
                const existingModal = document.querySelector('.custom-modal');
                if (existingModal) {
                    existingModal.remove();
                }

                const modal = document.createElement('div');
                modal.className = 'custom-modal fixed inset-0 flex items-center justify-center z-[100] bg-black bg-opacity-50';
                modal.innerHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-sm mx-4 text-center">
                        <h4 class="text-xl font-bold mb-4 ${type === 'error' ? 'text-red-600' : 'text-green-600'}">メッセージ</h4>
                        <p class="text-gray-700 mb-6">${message}</p>
                        <button class="bg-blue-600 text-white font-bold py-2 px-6 rounded-full hover:bg-blue-700 transition-colors duration-300" onclick="this.closest('.custom-modal').remove()">閉じる</button>
                    </div>
                `;
                document.body.appendChild(modal);
            }
        });
    </script>
</body>
</html>
